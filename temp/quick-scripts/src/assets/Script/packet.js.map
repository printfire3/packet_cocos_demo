{"version":3,"sources":["assets/Script/packet.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAElF,6CAAwC;AAElC,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAoC,0BAAY;IAAhD;QAAA,qEAmDC;QAhDG,qBAAe,GAAmB,IAAI,CAAC;QAEvC,oBAAc,GAAiB,IAAI,CAAC;QAEpC,WAAK,GAAG,GAAG,CAAC;QAcZ,UAAI,GAAG;YACH,kBAAkB;YAClB,IAAI,OAAO,GAAG,KAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;YAChD,iBAAiB;YACjB,IAAI,OAAO,CAAC,WAAW,IAAI,KAAI,CAAC,eAAe,EAAC;gBAC5C,OAAO,CAAC,WAAW,GAAG,KAAI,CAAC,eAAe,CAAC;aAC9C;QACL,CAAC,CAAC;QAEF,MAAM;QACN,sBAAgB,GAAG,UAAC,KAAU;YAC1B,KAAI,CAAC,aAAa,EAAE,CAAC;QACzB,CAAC,CAAA;QAED,mBAAa,GAAI;YACb,SAAS;YACT,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,cAAc,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;YACnD,KAAI,CAAC,eAAe,EAAE,CAAC;QAC3B,CAAC,CAAA;QAED,qBAAe,GAAI;YACf,KAAI,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,qBAAW,CAAC,CAAC,WAAW,CAAC,KAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QACzE,CAAC,CAAA;;IAQL,CAAC;IA1CG,wBAAwB;IAExB,uBAAM,GAAN;QACI,IAAI,OAAO,GAAG,EAAE,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;QAChD,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC;IAED,sBAAK,GAAL;IAEA,CAAC;IA0BD,uBAAM,GAAN,UAAO,EAAS;QACZ,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QAC/B,IAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;YAClE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,qBAAW,CAAC,CAAC,WAAW,CAAE,IAAI,CAAC,IAAI,CAAC,CAAC;SACtE;IACL,CAAC;IA/CD;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;mDACc;IAEvC;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;kDACa;IALnB,MAAM;QAD1B,OAAO;OACa,MAAM,CAmD1B;IAAD,aAAC;CAnDD,AAmDC,CAnDmC,EAAE,CAAC,SAAS,GAmD/C;kBAnDoB,MAAM","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport PacketGroup from \"./packetGroup\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Packet extends cc.Component {\n\n    @property(cc.SpriteFrame)\n    initSpriteFrame: cc.SpriteFrame = null;\n    @property(cc.AudioClip)\n    explosionSound: cc.AudioClip = null;\n\n    speed = 150;\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        let manager = cc.director.getCollisionManager();\n        manager.enabled = true;\n        this.init();\n    }\n\n    start () {\n\n    }\n\n    init = () => {\n        // 找到node的Sprite组件\n        let nSprite = this.node.getComponent(cc.Sprite);\n        // 初始化spriteFrame\n        if (nSprite.spriteFrame != this.initSpriteFrame){\n            nSprite.spriteFrame = this.initSpriteFrame;\n        }\n    };\n\n    //碰撞检测\n    onCollisionEnter = (other: any) => {\n        this.explodingAnim();\n    }\n\n    explodingAnim =  () => {\n        // 播放爆炸音效\n        cc.audioEngine.play(this.explosionSound, false, 1);\n        this.onHandleDestroy();\n    }\n\n    onHandleDestroy =  ()=> {  \n        this.node.parent.getComponent(PacketGroup).recycleNode(this.node, 1);\n    }\n\n    update(dt:number) {\n        this.node.y -= dt * this.speed;\n        if(this.node.y < -this.node.parent.height / 2 - this.node.height / 2) {\n            this.node.parent.getComponent(PacketGroup).recycleNode( this.node);\n        }\n    }\n}\n"]}